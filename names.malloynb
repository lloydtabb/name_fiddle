[{"kind":1,"language":"markdown","value":"# Baby Names\nAll this data comes from this table containing a `state`, `gender`, `year`, `name` and the `number` of people born in that state of that gender with the given name."},{"kind":2,"language":"malloy","value":"query: table('duckdb:usa_names.parquet') -> {\n  project: * \n  limit: 10\n}"},{"kind":1,"language":"markdown","value":"## A Basic Model"},{"kind":2,"language":"malloy","value":"source: names is table('duckdb:usa_names.parquet') + {\n  // Make the columns a little more readable\n  rename: \n    year_born is `year`\n    population is `number`\n\n  measure: \n    total_population is population.sum()\n    name_count is count(distinct name)\n    births_per_100k is floor(total_population/all(total_population) * 100000)\n    \n  dimension:\n    decade is floor(year_born/10) * 10\n}"},{"kind":1,"language":"markdown","value":"## Most Popular Names\nTop 100 names of all time by birth gender as measured by births per 100k."},{"kind":2,"language":"malloy","value":"query: names -> {\n  group_by: gender\n  nest: names_list_detail is { //  `_list_detail` renders results as a list.\n    group_by: name\n    aggregate: births_per_100k\n    limit: 100\n  }\n} "},{"kind":1,"language":"markdown","value":"## Most Popular Names by Decade\nTop 20 names by birth gender for each decade"},{"kind":2,"language":"malloy","value":"query: names -> {\n  group_by: decade\n  nest: by_gender is {\n    group_by: gender\n    nest: _list_detail is {\n      group_by: name\n      aggregate: births_per_100k\n      limit: 100\n    }\n  }\n} "}]